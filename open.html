<!DOCTYPE html>
<html>
<head>
<title>Open Link</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        background: #111;
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        font-family: Arial;
    }
    button {
        padding: 20px 40px;
        background: #00aaff;
        border: none;
        border-radius: 10px;
        color: white;
        font-size: 25px;
        cursor: pointer;
    }
</style>
</head>
<body>

<button onclick="openLink()">OPEN NOW</button>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
function getParameter(name) {
    return new URL(window.location.href).searchParams.get(name);
}

function openLink() {
    const link = getParameter("link");
    if (!link) return alert("No link found.");

    // 1. Try using Telegram API (may still open internal browser)
    if (window.Telegram?.WebApp) {
        Telegram.WebApp.openLink(link, { try_instant_view: false });
        return;
    }

    // 2. Try Chrome intent as hard override
    const chromeIntent =
        "intent://" + link.replace(/^https?:\/\//, "") +
        "#Intent;scheme=https;package=com.android.chrome;end";

    window.location.href = chromeIntent;

    // 3. Fallback to normal link after delay
    setTimeout(() => {
        window.location.href = link;
    }, 700);
}

if (window.Telegram?.WebApp) {
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();
}
</script>

</body>
</html>
